<div class="p-4">
  <div class="flex items-center justify-between mb-6">
    <h1 class="text-2xl font-bold text-gray-900 dark:text-white">User Profile</h1>
    <div class="space-x-2">
      <%= link_to 'Edit', edit_hub_admin_user_path(@user), class: 'text-sm font-medium text-blue-600 dark:text-blue-500 hover:underline' %>
      <%= link_to 'Assign Roles', assign_roles_hub_admin_user_path(@user), class: 'text-sm font-medium text-blue-600 dark:text-blue-500 hover:underline' %>
      <%= link_to 'Back to Users', hub_admin_users_path, class: 'text-sm font-medium text-blue-600 dark:text-blue-500 hover:underline' %>
    </div>
  </div>

  <% if notice.present? %>
    <div id="notice" class="flex p-4 mb-4 text-sm text-green-800 border border-green-300 rounded-lg bg-green-50 dark:bg-gray-800 dark:text-green-400 dark:border-green-800" role="alert">
      <svg class="flex-shrink-0 inline w-5 h-5 mr-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
        <path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"/>
      </svg>
      <span class="sr-only">Info</span>
      <div>
        <%= notice %>
      </div>
    </div>
  <% end %>

  <div class="max-w-3xl mx-auto">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
      <!-- User Details Card -->
      <div class="md:col-span-2 bg-white rounded-lg shadow dark:bg-gray-800 p-6">
        <h2 class="text-xl font-semibold text-gray-900 dark:text-white mb-4">User Information</h2>
        
        <dl class="grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-5">
          <div>
            <dt class="text-sm font-medium text-gray-500 dark:text-gray-400">Name</dt>
            <dd class="mt-1 text-base text-gray-900 dark:text-white"><%= @user.full_name %></dd>
          </div>
          
          <div>
            <dt class="text-sm font-medium text-gray-500 dark:text-gray-400">Email</dt>
            <dd class="mt-1 text-base text-gray-900 dark:text-white"><%= @user.email_address %></dd>
          </div>
          
          <div>
            <dt class="text-sm font-medium text-gray-500 dark:text-gray-400">Phone</dt>
            <dd class="mt-1 text-base text-gray-900 dark:text-white"><%= @user.phone_number.present? ? @user.phone_number : 'Not provided' %></dd>
          </div>
          
          <div>
            <dt class="text-sm font-medium text-gray-500 dark:text-gray-400">Job Title</dt>
            <dd class="mt-1 text-base text-gray-900 dark:text-white"><%= @user.job_title.present? ? @user.job_title : 'Not provided' %></dd>
          </div>
          
          <div>
            <dt class="text-sm font-medium text-gray-500 dark:text-gray-400">Status</dt>
            <dd class="mt-1">
              <% if @user.active? %>
                <span class="bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded dark:bg-green-900 dark:text-green-300">Active</span>
              <% else %>
                <span class="bg-red-100 text-red-800 text-xs font-medium px-2.5 py-0.5 rounded dark:bg-red-900 dark:text-red-300">Inactive</span>
              <% end %>
            </dd>
          </div>
          
          <div>
            <dt class="text-sm font-medium text-gray-500 dark:text-gray-400">Created</dt>
            <dd class="mt-1 text-base text-gray-900 dark:text-white"><%= Time.zone.parse(@user.created_at.to_s).strftime("%B %d, %Y") %></dd>
          </div>
        </dl>
        
        <% if @user.notes.present? %>
          <div class="mt-6 pt-6 border-t border-gray-200 dark:border-gray-700">
            <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400 mb-2">Notes</h3>
            <p class="text-base text-gray-900 dark:text-white"><%= @user.notes %></p>
          </div>
        <% end %>
      </div>
      
      <!-- User Roles Card -->
      <div class="bg-white rounded-lg shadow dark:bg-gray-800 p-6">
        <div class="flex justify-between items-center mb-4">
          <h2 class="text-xl font-semibold text-gray-900 dark:text-white">Roles</h2>
          <%= link_to 'Manage', assign_roles_hub_admin_user_path(@user), class: 'text-sm font-medium text-white bg-[#1C3835] hover:bg-[#152A27] focus:ring-4 focus:outline-none focus:ring-green-300 rounded-lg px-4 py-2.5' %>
        </div>
        
        <% if @user.roles.any? %>
          <ul class="space-y-2">
            <% @user.roles.each do |role| %>
              <li class="flex items-center justify-between p-3 bg-gray-50 rounded-lg dark:bg-gray-700">
                <div>
                  <span class="block text-base font-medium text-gray-900 dark:text-white"><%= role.name %></span>
                  <% if role.description.present? %>
                    <span class="block text-xs text-gray-500 dark:text-gray-400"><%= role.description %></span>
                  <% end %>
                </div>
                <%= link_to hub_admin_role_path(role), class: 'text-blue-600 dark:text-blue-500 hover:underline' do %>
                  <svg class="w-5 h-5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 12h12m-6-6v12"/>
                  </svg>
                <% end %>
              </li>
            <% end %>
          </ul>
        <% else %>
          <p class="text-gray-500 dark:text-gray-400">No roles assigned.</p>
        <% end %>
      </div>
    </div>
    
    <!-- User Activity -->
    <div class="bg-white rounded-lg shadow dark:bg-gray-800 p-6">
      <h2 class="text-xl font-semibold text-gray-900 dark:text-white mb-4">User Activity</h2>
      
      <dl class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4">
        <div class="p-4 bg-gray-50 rounded-lg dark:bg-gray-700">
          <dt class="text-sm font-medium text-gray-500 dark:text-gray-400">Last Sign In</dt>
          <dd class="mt-1 text-base text-gray-900 dark:text-white">
            <% if @user.last_sign_in_at.present? %>
              <%= Time.zone.parse(@user.last_sign_in_at.to_s).strftime("%B %d, %Y %H:%M") %>
            <% else %>
              Never signed in
            <% end %>
          </dd>
        </div>
        
        <div class="p-4 bg-gray-50 rounded-lg dark:bg-gray-700">
          <dt class="text-sm font-medium text-gray-500 dark:text-gray-400">Sign In Count</dt>
          <dd class="mt-1 text-base text-gray-900 dark:text-white"><%= @user.sign_in_count || 0 %></dd>
        </div>
        
        <div class="p-4 bg-gray-50 rounded-lg dark:bg-gray-700">
          <dt class="text-sm font-medium text-gray-500 dark:text-gray-400">Last IP</dt>
          <dd class="mt-1 text-base text-gray-900 dark:text-white">
            <%= @user.current_sign_in_ip.present? ? @user.current_sign_in_ip : 'Unknown' %>
          </dd>
        </div>
      </dl>
    </div>
  </div>
</div>
