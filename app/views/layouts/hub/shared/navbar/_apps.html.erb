<!-- Namespace Selection Dropdown -->
<button
  type="button"
  data-dropdown-toggle="namespaces-dropdown"
  class="p-2 text-gray-500 rounded-lg hover:text-gray-900 hover:bg-gray-100 dark:text-gray-400 dark:hover:text-white dark:hover:bg-gray-700 focus:ring-4 focus:ring-gray-300 dark:focus:ring-gray-600"
>
  <span class="sr-only">View namespaces</span>
  <%= icon "squares-2x2", class: "w-6 h-6" %>
</button>

<!-- Namespaces Dropdown menu -->
<div
  class="hidden overflow-hidden z-50 my-4 max-w-sm text-base list-none bg-white rounded divide-y divide-gray-100 shadow-lg dark:bg-gray-700 dark:divide-gray-600 rounded-xl"
  id="namespaces-dropdown"
>
  <div
    class="block py-2 px-4 text-base font-medium text-center text-gray-700 bg-gray-50 dark:bg-gray-600 dark:text-gray-300"
  >
    Applications
  </div>
  <div class="grid grid-cols-2 gap-4 p-4">
    <!-- Admin Namespace -->
    <% if Current.user&.admin? %>
    <a
      href="<%= hub_admin_dashboard_path rescue "#" %>"
      class="block p-4 text-center rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 group #{controller.controller_path.start_with?('hub/admin') ? 'bg-blue-50 dark:bg-gray-600' : ''}"
    >
      <%= icon "shield-check", class: "mx-auto mb-2 w-10 h-10 text-gray-500 group-hover:text-gray-600 dark:text-gray-400 dark:group-hover:text-gray-400 #{controller.controller_path.start_with?('hub/admin') ? 'text-blue-600 dark:text-blue-500' : ''}" %>
      <div class="text-sm font-medium text-gray-900 dark:text-white">Admin</div>
      <div class="text-xs text-gray-500 dark:text-gray-400">User & Farm Management</div>
    </a>
    <% end %>
    
    <!-- Core Namespace -->
    <a
      href="<%= hub_core_dashboard_path rescue "#" %>"
      class="block p-4 text-center rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 group #{controller.controller_path.start_with?('hub/core') ? 'bg-blue-50 dark:bg-gray-600' : ''}"
    >
      <%= icon "home-modern", class: "mx-auto mb-2 w-10 h-10 text-gray-500 group-hover:text-gray-600 dark:text-gray-400 dark:group-hover:text-gray-400 #{controller.controller_path.start_with?('hub/core') ? 'text-blue-600 dark:text-blue-500' : ''}" %>
      <div class="text-sm font-medium text-gray-900 dark:text-white">Core</div>
      <div class="text-xs text-gray-500 dark:text-gray-400">Dashboard & Seasons</div>
    </a>
    
    <!-- Cultivation Namespace -->
    <a
      href="<%= hub_cultivation_dashboard_path rescue "#" %>"
      class="block p-4 text-center rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 group #{controller.controller_path.start_with?('hub/cultivation') ? 'bg-blue-50 dark:bg-gray-600' : ''}"
    >
      <%= icon "beaker", class: "mx-auto mb-2 w-10 h-10 text-gray-500 group-hover:text-gray-600 dark:text-gray-400 dark:group-hover:text-gray-400 #{controller.controller_path.start_with?('hub/cultivation') ? 'text-blue-600 dark:text-blue-500' : ''}" %>
      <div class="text-sm font-medium text-gray-900 dark:text-white">Cultivation</div>
      <div class="text-xs text-gray-500 dark:text-gray-400">Operations & Tools</div>
    </a>
    
    <!-- Measure Namespace -->
    <a
      href="<%= hub_measure_dashboard_path rescue "#" %>"
      class="block p-4 text-center rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 group #{controller.controller_path.start_with?('hub/measure') ? 'bg-blue-50 dark:bg-gray-600' : ''}"
    >
      <%= icon "chart-bar", class: "mx-auto mb-2 w-10 h-10 text-gray-500 group-hover:text-gray-600 dark:text-gray-400 dark:group-hover:text-gray-400 #{controller.controller_path.start_with?('hub/measure') ? 'text-blue-600 dark:text-blue-500' : ''}" %>
      <div class="text-sm font-medium text-gray-900 dark:text-white">Measure</div>
      <div class="text-xs text-gray-500 dark:text-gray-400">Analytics & Observations</div>
    </a>
  </div>
  <!-- User Controls -->
  <div class="py-2 px-4 border-t border-gray-200 dark:border-gray-600">
    <div class="grid grid-cols-2 gap-4">
      <a href="<%= edit_hub_profile_path rescue "#" %>" class="px-4 py-2 text-sm font-medium text-center text-gray-900 bg-white rounded-lg hover:bg-gray-100 dark:text-white dark:bg-gray-600 dark:hover:bg-gray-700">
        <%= icon "user-circle", class: "mr-2 w-4 h-4 inline-block" %>
        Profile
      </a>
      <a href="<%= logout_path %>" data-turbo-method="delete" class="px-4 py-2 text-sm font-medium text-center text-gray-900 bg-white rounded-lg hover:bg-gray-100 dark:text-white dark:bg-gray-600 dark:hover:bg-gray-700">
        <%= icon "arrow-right-on-rectangle", class: "mr-2 w-4 h-4 inline-block" %>
        Sign out
      </a>
    </div>
  </div>
</div>
